<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>A Toolkit for Soil Gas Analysis • ConFluxPro</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="A Toolkit for Soil Gas Analysis">
<meta name="description" content="A collection of different functions that help analysing soil gas profiles. It implements different approaches for flux calculation based on the gradient-flux method and includes an inverse model for production-based flux estimation.">
<meta property="og:description" content="A collection of different functions that help analysing soil gas profiles. It implements different approaches for flux calculation based on the gradient-flux method and includes an inverse model for production-based flux estimation.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">ConFluxPro</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/overview.html">overview</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9">
<div class="section level1">
<div class="page-header"><h1 id="confluxpro-">ConFluxPro <a><img src="inst/logo_hexagon.svg" align="right" height="139"></a>
<a class="anchor" aria-label="anchor" href="#confluxpro-"></a>
</h1></div>
<p>ConFluxPro is a free toolbox for modelling soil gas fluxes using the Flux Gradient Method (FGM). It provides functions for data preparation, a framework for model set-up and implements different FGM models, including an inverse approach.</p>
<!-- TODO: Insert text to link to papers  -->
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the current development version from github:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("remotes")</span></span>
<span><span class="fu">remotes</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"valentingar/ConFluxPro"</span><span class="op">)</span></span></code></pre></div>
<p>To get started, check out the provided vignette after installation:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/vignette.html" class="external-link">vignette</a></span><span class="op">(</span><span class="st">"overview"</span>, package <span class="op">=</span> <span class="st">"ConFluxPro"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="basis">Basis<a class="anchor" aria-label="anchor" href="#basis"></a>
</h2>
<p>The Flux Gradient Method (FGM) calculates diffusive flux rates <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>F</mi><annotation encoding="application/x-tex">F</annotation></semantics></math> of gases from vertical concentration gradients <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>d</mi><mi>c</mi><mi>/</mi><mi>d</mi><mi>z</mi></mrow><annotation encoding="application/x-tex">dc/dz</annotation></semantics></math> in the soil air and the apparent diffusion coefficient coefficient <math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><msub><mi>D</mi><mi>s</mi></msub><annotation encoding="application/x-tex">D_s</annotation></semantics></math>.</p>
<p><math display="block" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>F</mi><mo>=</mo><mo>−</mo><msub><mi>D</mi><mi>s</mi></msub><mo>⋅</mo><mfrac><mrow><mi>d</mi><mi>c</mi></mrow><mrow><mi>d</mi><mi>z</mi></mrow></mfrac></mrow><annotation encoding="application/x-tex">
F= -D_s\cdot \frac{dc}{dz}
</annotation></semantics></math></p>
<p>The FGM is an excellent alternative to other methods, such as Eddy-Covariance or chamber measurements, that can be costly or work intensive. By measuring the concentration gradients in the soil and deriving the apparent diffusion coefficient from soil physical parameters, a continuous and low-impact measurement of soil gas fluxes and vertical production profiles is possible.</p>
<p>While the basic calculation of fluxes may be simple, FGM requires the combination of different datasets of varying methods. This is where ConFluxPro comes in. This package can help to easily process raw data, combine datasets and set up different model variants in a straightforward and reproducible manner.</p>
<p>For more background, see a <a href="https://doi.org/10.1016/j.agrformet.2014.03.006" class="external-link">review</a> on the method and how it can be deployed especially for <a href="https://doi.org/10.3390/app10238653" class="external-link">long-term monitoring</a> of soil gas fluxes. <!-- TODO: link to own paper as well --> <!-- TODO: link to paper where CFP has been used --></p>
</div>
<div class="section level2">
<h2 id="workflow">Workflow<a class="anchor" aria-label="anchor" href="#workflow"></a>
</h2>
<div class="section level3">
<h3 id="data-handling">Data handling<a class="anchor" aria-label="anchor" href="#data-handling"></a>
</h3>
<p>A central idea in ConFluxPro is that each distinct profile, i.e. a single time point at a given site for a given gas, can be uniquely identified by a set of columns called <code>id_cols</code>.</p>
<p>Different classes help to set up and validate datasets:</p>
<ul>
<li>
<code><a href="reference/cfp_gasdata.html">cfp_gasdata()</a></code> A <code>data.frame</code> where for each profile there is concentration data in a column <code>x_ppm</code> at different depths in column <code>depth</code>.</li>
<li>
<code><a href="reference/cfp_soilphys.html">cfp_soilphys()</a></code> A <code>data.frame</code> with soil physical information. Each profile is split into layers defined by their <code>upper</code> and <code>lower</code> boundary, without gaps or overlaps. Each layer has at least information of the density of the air <code>c_air</code> and the diffusion coefficient <code>DS</code> for a given gas.</li>
<li>
<code><a href="reference/cfp_layers_map.html">cfp_layers_map()</a></code> A <code>data.frame</code> that is layered similarly and gives information for the model structure, i.e. for which layers a production rate should be calculated.</li>
</ul>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">gasdata</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cfp_gasdata.html">cfp_gasdata</a></span><span class="op">(</span><span class="fu">ConFluxPro</span><span class="fu">::</span><span class="va"><a href="reference/gasdata.html">gasdata</a></span>,</span>
<span>                       id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"Date"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; added 'gas' to id_cols</span></span>
<span></span>
<span><span class="va">soilphys</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cfp_soilphys.html">cfp_soilphys</a></span><span class="op">(</span><span class="fu">ConFluxPro</span><span class="fu">::</span><span class="va"><a href="reference/soilphys.html">soilphys</a></span>,</span>
<span>                         id_cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"Date"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; added 'gas' to id_cols</span></span>
<span></span>
<span><span class="va">layers_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cfp_layers_map.html">cfp_layers_map</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>site <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"site_a"</span>, <span class="st">"site_b"</span><span class="op">)</span>, each <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>,</span>
<span>             upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,   <span class="fl">0</span>,  <span class="op">-</span><span class="fl">20</span>, <span class="fl">7</span>,   <span class="fl">0</span>,  <span class="op">-</span><span class="fl">20</span><span class="op">)</span>,</span>
<span>             lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">100</span>, <span class="fl">0</span>, <span class="op">-</span><span class="fl">20</span>, <span class="op">-</span><span class="fl">100</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  gas <span class="op">=</span> <span class="st">"CO2"</span>, </span>
<span>  lowlim <span class="op">=</span> <span class="fl">0</span>, </span>
<span>  highlim <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="st">"site"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; added 'gas' to id_cols</span></span></code></pre></div>
<p>These three datasets are then combined in the central data class <code><a href="reference/cfp_dat.html">cfp_dat()</a></code>, and automatically adjusted to correctly match each other. This object contains then all necessary information.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">my_dat</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/cfp_dat.html">cfp_dat</a></span><span class="op">(</span><span class="va">gasdata</span>, <span class="va">soilphys</span>, <span class="va">layers_map</span><span class="op">)</span></span>
<span><span class="va">my_dat</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A cfp_dat object to be used as input in ConFluxPro models. </span></span>
<span><span class="co">#&gt; id_cols: site Date gas </span></span>
<span><span class="co">#&gt; number of profiles:  24 </span></span>
<span><span class="co">#&gt; number of groups:  2</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="flux-modeling">Flux modeling<a class="anchor" aria-label="anchor" href="#flux-modeling"></a>
</h3>
<p>Once a <code><a href="reference/cfp_dat.html">cfp_dat()</a></code> object is created succesfully, the modelling is very easy:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 'normal' forward model</span></span>
<span><span class="va">FLUX</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fg_flux.html">fg_flux</a></span><span class="op">(</span><span class="va">my_dat</span><span class="op">)</span></span>
<span><span class="co"># inverse model</span></span>
<span><span class="va">PROFLUX</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/pro_flux.html">pro_flux</a></span><span class="op">(</span><span class="va">my_dat</span><span class="op">)</span></span></code></pre></div>
<p>Each modelling function can be adapted to different needs. For example, we can provide a different <code>modes</code> argument to <code><a href="reference/fg_flux.html">fg_flux()</a></code> to calculate the concentration gradient form an exponential fit instead of a linear model.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">FLUX</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/fg_flux.html">fg_flux</a></span><span class="op">(</span><span class="va">my_dat</span>, modes <span class="op">=</span> <span class="st">"EF"</span><span class="op">)</span></span></code></pre></div>
<p>The result in both cases is an object that contains the original data <code>my_dat</code> and th flux rates in different soil layers for each of the profiles identified in <code><a href="reference/cfp_dat.html">cfp_dat()</a></code>. From this, the soil/atmoshere efflux rate and the specific production rate in each model soil layer can be extracted.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># soil/atmosphere efflux</span></span>
<span><span class="fu"><a href="reference/efflux.html">efflux</a></span><span class="op">(</span><span class="va">FLUX</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/efflux.html">efflux</a></span><span class="op">(</span><span class="va">PROFLUX</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># per-layer production rate</span></span>
<span><span class="fu"><a href="reference/production.html">production</a></span><span class="op">(</span><span class="va">FLUX</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/production.html">production</a></span><span class="op">(</span><span class="va">PROFLUX</span><span class="op">)</span></span></code></pre></div>
<p>In the case of the forward model <code>FLUX</code>, this may require some consideration for which method of extrapolation to be used (see the manual <code><a href="reference/efflux.html">?efflux</a></code>), as different approaches are implemented.</p>
<p><code><a href="reference/efflux.html">efflux()</a></code> returns a <code>data.frame</code> with one row per profile and the corresponding efflux rate.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/efflux.html">efflux</a></span><span class="op">(</span><span class="va">PROFLUX</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Date</span>, y <span class="op">=</span> <span class="va">efflux</span>, col <span class="op">=</span> <span class="va">site</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_date.html" class="external-link">scale_x_date</a></span><span class="op">(</span>date_minor_breaks <span class="op">=</span> <span class="st">"1 month"</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">ylab</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/expression.html" class="external-link">expression</a></span><span class="op">(</span><span class="st">"CO"</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">~</span><span class="st">"efflux ["</span><span class="op">*</span><span class="va">mu</span><span class="op">*</span><span class="st">"mol m"</span><span class="op">^</span><span class="st">"-2"</span><span class="op">~</span><span class="st">"s"</span><span class="op">^</span><span class="st">"-1"</span><span class="op">*</span><span class="st">"]"</span><span class="op">)</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-8-1.svg" width="100%"></p>
</div>
<div class="section level3">
<h3 id="extracting-information">Extracting information<a class="anchor" aria-label="anchor" href="#extracting-information"></a>
</h3>
<p>Most information stored in the objects can be easily extracted. Extraction functions have the prefix <code>cfp_</code>.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get the id_cols that identify the unique profiles of an object:</span></span>
<span><span class="fu"><a href="reference/extractors.html">cfp_id_cols</a></span><span class="op">(</span><span class="va">gasdata</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/extractors.html">cfp_id_cols</a></span><span class="op">(</span><span class="va">FLUX</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Get the layers_map from a combined dataset or model:</span></span>
<span><span class="fu"><a href="reference/cfp_layers_map.html">cfp_layers_map</a></span><span class="op">(</span><span class="va">my_dat</span><span class="op">)</span></span>
<span><span class="fu"><a href="reference/cfp_layers_map.html">cfp_layers_map</a></span><span class="op">(</span><span class="va">PROFLUX</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="big-datasets-parallel-processing-and-progress-bars">Big datasets: Parallel processing and progress bars<a class="anchor" aria-label="anchor" href="#big-datasets-parallel-processing-and-progress-bars"></a>
</h3>
<p>For big datasets (1000+ profiles), some calculations may takes some time. ConFluxPro uses the excellent <a href="https://github.com/HenrikBengtsson/future" class="external-link"><code>future</code></a> and <a href="https://github.com/HenrikBengtsson/progressr" class="external-link"><code>progressr</code></a> packages for parallel processing and progress bars in some cpu-intensive functions.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://future.futureverse.org" class="external-link">future</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://progressr.futureverse.org" class="external-link">progressr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># enable paralell processing with future</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/multisession.html" class="external-link">multisession</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># disable</span></span>
<span><span class="fu"><a href="https://future.futureverse.org/reference/plan.html" class="external-link">plan</a></span><span class="op">(</span><span class="fu"><a href="https://future.futureverse.org/reference/sequential.html" class="external-link">sequential</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># enable progress bars for one function call</span></span>
<span><span class="fu"><a href="https://progressr.futureverse.org/reference/with_progress.html" class="external-link">with_progress</a></span><span class="op">(</span><span class="op">{</span><span class="fu"><a href="reference/pro_flux.html">pro_flux</a></span><span class="op">(</span><span class="va">my_dat</span><span class="op">)</span><span class="op">}</span><span class="op">)</span></span>
<span><span class="co"># or for all function calls automatically</span></span>
<span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span>global <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co"># and change layout</span></span>
<span><span class="fu"><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">handlers</a></span><span class="op">(</span><span class="fu"><a href="https://progressr.futureverse.org/reference/handler_progress.html" class="external-link">handler_progress</a></span><span class="op">(</span>format <span class="op">=</span> <span class="st">":percent [:bar] :eta"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="post-processing">Post processing<a class="anchor" aria-label="anchor" href="#post-processing"></a>
</h3>
<!-- TODO: write vignette for alternate() and bootstrap_error() and link here -->
</div>
<div class="section level3">
<h3 id="subsetting">Subsetting<a class="anchor" aria-label="anchor" href="#subsetting"></a>
</h3>
<p>Subsetting for all main data types happens analogous to <code>dplyr</code> by calling <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter()</a></code>. You can select profiles based on any <code>id_cols</code> or by selecting the <code>prof_id</code> generated in the call to <code><a href="reference/cfp_dat.html">cfp_dat()</a></code>. This also works for model results.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">soilphys</span>, </span>
<span>       <span class="va">Date</span> <span class="op">==</span> <span class="st">"2021-04-01"</span>,</span>
<span>       <span class="va">site</span> <span class="op">==</span> <span class="st">"site_b"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A cfp_soilphys object </span></span>
<span><span class="co">#&gt; id_cols: site Date gas </span></span>
<span><span class="co">#&gt; 1  unique profiles </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     site  TPS   a   b depth upper lower       Date        SWC        t    p</span></span>
<span><span class="co">#&gt; 1 site_b 0.35 1.2 1.5 -80.0   -60  -100 2021-04-01 0.14674436 5.131912 1013</span></span>
<span><span class="co">#&gt; 2 site_b 0.35 1.2 1.5 -50.0   -40   -60 2021-04-01 0.12995582 5.248726 1013</span></span>
<span><span class="co">#&gt; 3 site_b 0.20 0.8 1.3 -30.0   -20   -40 2021-04-01 0.04510915 5.326602 1013</span></span>
<span><span class="co">#&gt; 4 site_b 0.20 0.8 1.3 -16.5   -13   -20 2021-04-01 0.03230483 4.975450 1013</span></span>
<span><span class="co">#&gt; 5 site_b 0.61 0.7 1.4  -9.0    -5   -13 2021-04-01 0.12086816 5.118654 1013</span></span>
<span><span class="co">#&gt; 6 site_b 0.61 0.7 1.4  -2.5     0    -5 2021-04-01 0.12189161 5.242764 1013</span></span>
<span><span class="co">#&gt; 7 site_b 0.80 0.4 1.5   1.5     3     0 2021-04-01 0.15749876 5.378220 1013</span></span>
<span><span class="co">#&gt; 8 site_b 0.80 0.4 1.5   5.0     7     3 2021-04-01 0.12795519 5.582906 1013</span></span>
<span><span class="co">#&gt;        AFPS       DSD0 gas           D0           DS    c_air</span></span>
<span><span class="co">#&gt; 1 0.2032556 0.10996264 CO2 1.428319e-05 1.570618e-06 43.78390</span></span>
<span><span class="co">#&gt; 2 0.2200442 0.12386427 CO2 1.429405e-05 1.770522e-06 43.76553</span></span>
<span><span class="co">#&gt; 3 0.1548909 0.07081471 CO2 1.430129e-05 1.012741e-06 43.75329</span></span>
<span><span class="co">#&gt; 4 0.1676952 0.07851755 CO2 1.426866e-05 1.120340e-06 43.80853</span></span>
<span><span class="co">#&gt; 5 0.4891318 0.25721385 CO2 1.428196e-05 3.673518e-06 43.78599</span></span>
<span><span class="co">#&gt; 6 0.4881084 0.25646070 CO2 1.429349e-05 3.665719e-06 43.76647</span></span>
<span><span class="co">#&gt; 7 0.6425012 0.20600177 CO2 1.430608e-05 2.947079e-06 43.74518</span></span>
<span><span class="co">#&gt; 8 0.6720448 0.22037247 CO2 1.432512e-05 3.156862e-06 43.71306</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">my_dat</span>, <span class="va">Date</span> <span class="op">&lt;</span> <span class="st">"2021-05-01"</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A cfp_dat object to be used as input in ConFluxPro models. </span></span>
<span><span class="co">#&gt; id_cols: site Date gas </span></span>
<span><span class="co">#&gt; number of profiles:  8 </span></span>
<span><span class="co">#&gt; number of groups:  2</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">PROFLUX</span>, <span class="va">prof_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">7</span>,<span class="fl">9</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A cfp_pfres pro_flux model result. </span></span>
<span><span class="co">#&gt; mean RMSE achieved:  0.007619 </span></span>
<span><span class="co">#&gt; number of failed fits:  0 </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A cfp_pfmod pro_flux model. </span></span>
<span><span class="co">#&gt; zero_flux: TRUE  </span></span>
<span><span class="co">#&gt; zero_limits:  -Inf Inf  </span></span>
<span><span class="co">#&gt; DSD0_optim:  FALSE  </span></span>
<span><span class="co">#&gt; evenness_factor:  0  </span></span>
<span><span class="co">#&gt; known_flux_factor:  0  </span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; A cfp_dat object to be used as input in ConFluxPro models. </span></span>
<span><span class="co">#&gt; id_cols: site Date gas </span></span>
<span><span class="co">#&gt; number of profiles:  3 </span></span>
<span><span class="co">#&gt; number of groups:  1</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h3>
<p>To get a better understanding of your data, you can plot profiles with the <code><a href="reference/plot_profile.html">plot_profile()</a></code> function. This returns an editable <code>ggplot2</code> plot.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">PROFLUX</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">prof_id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">16</span>, <span class="fl">17</span><span class="op">)</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="reference/plot_profile.html">plot_profile</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-1.svg" width="75%" style="display: block; margin: auto;"></p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">soilphys</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">Date</span> <span class="op">==</span> <span class="st">"2021-08-01"</span><span class="op">)</span> <span class="op">%&gt;%</span></span>
<span>  <span class="fu"><a href="reference/plot_profile.html">plot_profile</a></span><span class="op">(</span><span class="op">)</span><span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_light</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-unnamed-chunk-12-2.svg" width="75%" style="display: block; margin: auto;"></p>
</div>
<div class="section level3">
<h3 id="getting-help">Getting help<a class="anchor" aria-label="anchor" href="#getting-help"></a>
</h3>
<p>Most functionality, background and output is documented in the internal manual. Just run <code>?function_name</code> to access it. Furthermore, you can get descriptions of all parameters and their respective units with a special function <code><a href="reference/cfp_parameter.html">cfp_parameter()</a></code>.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/cfp_parameter.html">cfp_parameter</a></span><span class="op">(</span><span class="st">"efflux"</span><span class="op">)</span></span>
<span><span class="co">#&gt;      name                             description           unit</span></span>
<span><span class="co">#&gt; 29 efflux efflux at the soil/atmosphere interface µmol m^-2 s^-1</span></span>
<span><span class="fu"><a href="reference/cfp_parameter.html">cfp_parameter</a></span><span class="op">(</span><span class="va">soilphys</span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; This object contains the following parameters:</span></span>
<span><span class="co">#&gt;     name                    description     unit</span></span>
<span><span class="co">#&gt; 2    gas                name of the gas     &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 3  depth  depth, higher values point up       cm</span></span>
<span><span class="co">#&gt; 4  upper          upper border of layer       cm</span></span>
<span><span class="co">#&gt; 5  lower          lower border of layer       cm</span></span>
<span><span class="co">#&gt; 6    TPS               total pore space  vol/vol</span></span>
<span><span class="co">#&gt; 7   AFPS          air-filled pore space  vol/vol</span></span>
<span><span class="co">#&gt; 8    SWC             soil water content  vol/vol</span></span>
<span><span class="co">#&gt; 9      t                    temperature       °C</span></span>
<span><span class="co">#&gt; 10     p                       pressure      hPa</span></span>
<span><span class="co">#&gt; 11  DSD0           relative diffusivity        1</span></span>
<span><span class="co">#&gt; 12    DS apparent diffusion coefficient m^2 s^-1</span></span>
<span><span class="co">#&gt; 13    D0   diffusion coefficient in air m^2 s^-1</span></span>
<span><span class="co">#&gt; 14 c_air          number density of air mol m^-3</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="contact">Contact<a class="anchor" aria-label="anchor" href="#contact"></a>
</h2>
<p>This package is being developed by Valentin Gartiser: code [at] valentingartiser.de</p>
<p>Please contact me if you experience any problems or have questions - I will be glad to help out where I can.</p>
</div>
<div class="section level2">
<h2 id="license">License<a class="anchor" aria-label="anchor" href="#license"></a>
</h2>
<p>This program is free software: you can redistribute it and/or modify it under the terms of the <a href="https://www.gnu.org/licenses/gpl-3.0.html.en" class="external-link">GNU General Public License</a> as published by the Free Software Foundation, either version 3 of the License, or (at your option) any later version.</p>
<p>This program is distributed in the hope that it will be useful, but WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details.</p>
</div>
</div>

  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small>GPL (&gt;= 3)</small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing ConFluxPro</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Valentin Gartiser <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0001-5320-374X" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=ConFluxPro" class="external-link"><img src="https://www.r-pkg.org/badges/version/ConFluxPro" alt="CRAN status"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Valentin Gartiser.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
